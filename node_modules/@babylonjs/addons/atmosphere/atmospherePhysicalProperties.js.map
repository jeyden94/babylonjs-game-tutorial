{"version":3,"file":"atmospherePhysicalProperties.js","sourceRoot":"","sources":["../../../../dev/addons/src/atmosphere/atmospherePhysicalProperties.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) Microsoft Corporation.\r\n// Licensed under the MIT License.\r\n\r\nimport type { IAtmospherePhysicalPropertiesOptions } from \"./atmospherePhysicalPropertiesOptions\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { Vector3 } from \"core/Maths/math.vector\";\r\n\r\nconst DefaultPlanetRadius = 6360.0;\r\nconst DefaultPlanetRadiusOffset = 0.01;\r\nconst DefaultAtmosphereThickness = 100.0;\r\n\r\n// The scattering and absorption values are per kilometer measured at sea level.\r\nconst DefaultPeakRayleighScattering = new Vector3(0.005802, 0.013558, 0.0331);\r\nconst DefaultPeakMieScattering = new Vector3(0.003996, 0.003996, 0.003996);\r\nconst DefaultPeakMieAbsorption = new Vector3(0.000444, 0.000444, 0.000444);\r\nconst DefaultPeakOzoneAbsorption = new Vector3(0.00065, 0.001881, 0.000085);\r\n\r\n/**\r\n * Describes the physical properties of the atmosphere. Assumes a spherical planet.\r\n * - \"radius\" values describe a distance from the planet's center.\r\n * - \"height\" values describe a distance from the planet's surface.\r\n * - Distances are in kilometers unless otherwise specified. Angles are in radians.\r\n */\r\nexport class AtmospherePhysicalProperties {\r\n    /**\r\n     * Notification for when properties of the {@link AtmospherePhysicalProperties} are changed.\r\n     */\r\n    public readonly onChangedObservable = new Observable<AtmospherePhysicalProperties>();\r\n\r\n    private _planetRadius: number;\r\n    private _planetRadiusOffset: number;\r\n    private _atmosphereThickness: number;\r\n    private _rayleighScatteringScale: number;\r\n    private _peakRayleighScattering = new Vector3();\r\n    private _mieScatteringScale: number;\r\n    private _peakMieScattering = new Vector3();\r\n    private _mieAbsorptionScale: number;\r\n    private _peakMieAbsorption = new Vector3();\r\n    private _ozoneAbsorptionScale: number;\r\n    private _peakOzoneAbsorption = new Vector3();\r\n\r\n    // Inferred values.\r\n    private _planetRadiusWithOffset = 0;\r\n    private _planetRadiusSquared = 0;\r\n    private _atmosphereRadius = 0;\r\n    private _atmosphereRadiusSquared = 0;\r\n    private _horizonDistanceToAtmosphereEdge = 0;\r\n    private _horizonDistanceToAtmosphereEdgeSquared = 0;\r\n    private _rayleighScattering = new Vector3();\r\n    private _mieScattering = new Vector3();\r\n    private _mieAbsorption = new Vector3();\r\n    private _mieExtinction = new Vector3();\r\n    private _ozoneAbsorption = new Vector3();\r\n\r\n    /**\r\n     * The radius of the planet in kilometers.\r\n     */\r\n    public get planetRadius(): number {\r\n        return this._planetRadius;\r\n    }\r\n    public set planetRadius(value: number) {\r\n        if (this._planetRadius !== value) {\r\n            this._planetRadius = value;\r\n            this._recomputeDimensionalParameters();\r\n            this.onChangedObservable.notifyObservers(this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * The squared radius of the planet in kilometers.\r\n     */\r\n    public get planetRadiusSquared(): number {\r\n        return this._planetRadiusSquared;\r\n    }\r\n\r\n    /**\r\n     * Offset applied to view points near the planet's surface. This should be greater than 0.\r\n     * It prevents rendering issues close to the planet's surface.\r\n     */\r\n    public get planetRadiusOffset(): number {\r\n        return this._planetRadiusOffset;\r\n    }\r\n    public set planetRadiusOffset(value: number) {\r\n        if (this._planetRadiusOffset !== value) {\r\n            this._planetRadiusOffset = value;\r\n            this._recomputeDimensionalParameters();\r\n            this.onChangedObservable.notifyObservers(this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * This is the {@link planetRadius} with the additional {@link planetRadiusOffset}, in kilometers.\r\n     */\r\n    public get planetRadiusWithOffset(): number {\r\n        return this._planetRadiusWithOffset;\r\n    }\r\n\r\n    /**\r\n     * The thickness of the atmosphere measured in kilometers.\r\n     */\r\n    public get atmosphereThickness(): number {\r\n        return this._atmosphereThickness;\r\n    }\r\n    public set atmosphereThickness(value: number) {\r\n        if (this._atmosphereThickness !== value) {\r\n            this._atmosphereThickness = value;\r\n            this._recomputeDimensionalParameters();\r\n            this.onChangedObservable.notifyObservers(this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * The combined planet radius and atmosphere thickness in kilometers.\r\n     */\r\n    public get atmosphereRadius(): number {\r\n        return this._atmosphereRadius;\r\n    }\r\n\r\n    /**\r\n     * The atmosphere radius squared in kilometers.\r\n     */\r\n    public get atmosphereRadiusSquared(): number {\r\n        return this._atmosphereRadiusSquared;\r\n    }\r\n\r\n    /**\r\n     * Horizon distance from the planet's surface to the outer edge of the atmosphere in kilometers.\r\n     */\r\n    public get horizonDistanceToAtmosphereEdge(): number {\r\n        return this._horizonDistanceToAtmosphereEdge;\r\n    }\r\n\r\n    /**\r\n     * Horizon distance from the planet's surface to the outer edge of the atmosphere, squared, in kilometers.\r\n     */\r\n    public get horizonDistanceToAtmosphereEdgeSquared(): number {\r\n        return this._horizonDistanceToAtmosphereEdgeSquared;\r\n    }\r\n\r\n    /**\r\n     * The scale applied to {@link peakRayleighScattering}.\r\n     */\r\n    public get rayleighScatteringScale(): number {\r\n        return this._rayleighScatteringScale;\r\n    }\r\n    public set rayleighScatteringScale(value: number) {\r\n        if (this._rayleighScatteringScale !== value) {\r\n            this._rayleighScatteringScale = value;\r\n            this._recomputeRayleighScattering();\r\n            this.onChangedObservable.notifyObservers(this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * The Rayleigh scattering per kilometer at sea level for red, green, and blue wavelengths.\r\n     */\r\n    public get peakRayleighScattering(): Vector3 {\r\n        return this._peakRayleighScattering;\r\n    }\r\n    public set peakRayleighScattering(value: Vector3) {\r\n        if (!this._peakRayleighScattering.equals(value)) {\r\n            this._peakRayleighScattering.copyFrom(value);\r\n            this._recomputeRayleighScattering();\r\n            this.onChangedObservable.notifyObservers(this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * The Rayleigh scattering per kilometer at sea level for red, green, and blue wavelengths.\r\n     * This value cannot be set directly. It is inferred by scaling {@link peakRayleighScattering} by {@link rayleighScatteringScale}.\r\n     */\r\n    public get rayleighScattering(): Vector3 {\r\n        return this._rayleighScattering;\r\n    }\r\n\r\n    /**\r\n     * The scale applied to {@link peakMieScattering}.\r\n     */\r\n    public get mieScatteringScale(): number {\r\n        return this._mieScatteringScale;\r\n    }\r\n    public set mieScatteringScale(value: number) {\r\n        if (this._mieScatteringScale !== value) {\r\n            this._mieScatteringScale = value;\r\n            this._recomputeMieScattering();\r\n            this.onChangedObservable.notifyObservers(this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * The Mie scattering per kilometer at sea level for red, green, and blue wavelengths.\r\n     */\r\n    public get peakMieScattering(): Vector3 {\r\n        return this._peakMieScattering;\r\n    }\r\n    public set peakMieScattering(value: Vector3) {\r\n        if (!this._peakMieScattering.equals(value)) {\r\n            this._peakMieScattering.copyFrom(value);\r\n            this._recomputeMieScattering();\r\n            this.onChangedObservable.notifyObservers(this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * The Mie scattering per kilometer at sea level for red, green, and blue wavelengths.\r\n     * This value cannot be set directly. It is inferred by scaling {@link mieScatteringScale} by {@link peakMieScattering}.\r\n     */\r\n    public get mieScattering(): Vector3 {\r\n        return this._mieScattering;\r\n    }\r\n\r\n    /**\r\n     * The scale applied to {@link peakMieAbsorption}.\r\n     */\r\n    public get mieAbsorptionScale(): number {\r\n        return this._mieAbsorptionScale;\r\n    }\r\n    public set mieAbsorptionScale(value: number) {\r\n        if (this._mieAbsorptionScale !== value) {\r\n            this._mieAbsorptionScale = value;\r\n            this._recomputeMieAbsorption();\r\n            this.onChangedObservable.notifyObservers(this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * The Mie absorption per kilometer at sea level for red, green, and blue wavelengths.\r\n     */\r\n    public get peakMieAbsorption(): Vector3 {\r\n        return this._peakMieAbsorption;\r\n    }\r\n    public set peakMieAbsorption(value: Vector3) {\r\n        if (!this._peakMieAbsorption.equals(value)) {\r\n            this._peakMieAbsorption.copyFrom(value);\r\n            this._recomputeMieAbsorption();\r\n            this.onChangedObservable.notifyObservers(this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * The Mie absorption per kilometer at sea level for red, green, and blue wavelengths.\r\n     * This value cannot be set directly. It is inferred by scaling {@link mieAbsorptionScale} by {@link peakMieAbsorption}.\r\n     */\r\n    public get mieAbsorption(): Vector3 {\r\n        return this._mieAbsorption;\r\n    }\r\n\r\n    /**\r\n     * The Mie extinction per kilometer at sea level for red, green, and blue wavelengths.\r\n     * This value cannot be set directly. It is inferred by adding the {@link mieAbsorption} to the {@link mieScattering}.\r\n     */\r\n    public get mieExtinction(): Vector3 {\r\n        return this._mieExtinction;\r\n    }\r\n\r\n    /**\r\n     * The scale applied to {@link peakOzoneAbsorption}.\r\n     */\r\n    public get ozoneAbsorptionScale(): number {\r\n        return this._ozoneAbsorptionScale;\r\n    }\r\n    public set ozoneAbsorptionScale(value: number) {\r\n        if (this._ozoneAbsorptionScale !== value) {\r\n            this._ozoneAbsorptionScale = value;\r\n            this._recomputeOzoneAbsorption();\r\n            this.onChangedObservable.notifyObservers(this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * The ozone absorption per kilometer measured at a height corresponding to it's peak concentration,\r\n     * for red, green, and blue wavelengths.\r\n     */\r\n    public get peakOzoneAbsorption(): Vector3 {\r\n        return this._peakOzoneAbsorption;\r\n    }\r\n    public set peakOzoneAbsorption(value: Vector3) {\r\n        if (!this._peakOzoneAbsorption.equals(value)) {\r\n            this._peakOzoneAbsorption.copyFrom(value);\r\n            this._recomputeOzoneAbsorption();\r\n            this.onChangedObservable.notifyObservers(this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * The ozone absorption per kilometer at sea level for red, green, and blue wavelengths.\r\n     * This value cannot be set directly. It is inferred by scaling {@link peakOzoneAbsorption} by {@link ozoneAbsorptionScale}.\r\n     */\r\n    public get ozoneAbsorption(): Vector3 {\r\n        return this._ozoneAbsorption;\r\n    }\r\n\r\n    /**\r\n     * Constructs the {@link AtmospherePhysicalProperties}.\r\n     * @param options - The options for the {@link AtmospherePhysicalProperties}.\r\n     */\r\n    constructor(options?: IAtmospherePhysicalPropertiesOptions) {\r\n        this._planetRadius = options?.planetRadius ?? DefaultPlanetRadius;\r\n        this._planetRadiusOffset = options?.planetRadiusOffset ?? DefaultPlanetRadiusOffset;\r\n        this._atmosphereThickness = options?.atmosphereThickness ?? DefaultAtmosphereThickness;\r\n        this._rayleighScatteringScale = options?.rayleighScatteringScale ?? 1.0;\r\n        this._peakRayleighScattering.copyFrom(options?.peakRayleighScattering ?? DefaultPeakRayleighScattering);\r\n        this._mieScatteringScale = options?.mieScatteringScale ?? 1.0;\r\n        this._peakMieScattering.copyFrom(options?.peakMieScattering ?? DefaultPeakMieScattering);\r\n        this._mieAbsorptionScale = options?.mieAbsorptionScale ?? 1.0;\r\n        this._peakMieAbsorption.copyFrom(options?.peakMieAbsorption ?? DefaultPeakMieAbsorption);\r\n        this._ozoneAbsorptionScale = options?.ozoneAbsorptionScale ?? 1.0;\r\n        this._peakOzoneAbsorption.copyFrom(options?.peakOzoneAbsorption ?? DefaultPeakOzoneAbsorption);\r\n\r\n        // Compute inferred values.\r\n        this._recomputeDimensionalParameters();\r\n        this._recomputeRayleighScattering();\r\n        this._recomputeMieScattering();\r\n        this._recomputeMieAbsorption();\r\n        this._recomputeOzoneAbsorption();\r\n    }\r\n\r\n    private _recomputeDimensionalParameters(): void {\r\n        this._planetRadiusWithOffset = this._planetRadius + this._planetRadiusOffset;\r\n        this._planetRadiusSquared = this._planetRadius * this._planetRadius;\r\n        this._atmosphereRadius = this._planetRadius + this._atmosphereThickness;\r\n        this._atmosphereRadiusSquared = this._atmosphereRadius * this._atmosphereRadius;\r\n        this._horizonDistanceToAtmosphereEdgeSquared = this._atmosphereRadiusSquared - this._planetRadiusSquared;\r\n        this._horizonDistanceToAtmosphereEdge = Math.sqrt(this._horizonDistanceToAtmosphereEdgeSquared);\r\n    }\r\n\r\n    private _recomputeRayleighScattering(): void {\r\n        this._peakRayleighScattering.scaleToRef(this._rayleighScatteringScale, this._rayleighScattering);\r\n    }\r\n\r\n    private _recomputeMieScattering(): void {\r\n        this._peakMieScattering.scaleToRef(this._mieScatteringScale, this._mieScattering);\r\n        this._recomputeMieExtinction();\r\n    }\r\n\r\n    private _recomputeMieAbsorption(): void {\r\n        this._peakMieAbsorption.scaleToRef(this._mieAbsorptionScale, this._mieAbsorption);\r\n        this._recomputeMieExtinction();\r\n    }\r\n\r\n    private _recomputeMieExtinction(): void {\r\n        this._mieAbsorption.addToRef(this._mieScattering, this._mieExtinction);\r\n    }\r\n\r\n    private _recomputeOzoneAbsorption(): void {\r\n        this._peakOzoneAbsorption.scaleToRef(this._ozoneAbsorptionScale, this._ozoneAbsorption);\r\n    }\r\n}\r\n"]}